<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Sankey Energiestatistik</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style id="compiled-css" type="text/css">
        #container {
            min-width: 300px;
            max-width: 1024px;
            height: 700px;
            margin: 1em auto;
            /*border: 1px solid silver;*/
        }

        /* EOS */
    </style>

</head>

<body>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/sankey.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>

    <select id="list2">
        <option value="2018" selected="selected">2018</option>
        <option value="2016">2016</option>
        <option value="2014">2014</option>
        <option value="2012">2012</option>
    </select>

    <div id="container"></div>

   <script type="text/javascript">//<![CDATA[
/*$("#list").on('change', function(){
    //alert('f')
    var selVal = $("#list").val();
    if(selVal == "2018" || selVal == '')
    {
        options.series = 
        [
            {
                name: '2018',
                data:
                {
                    csvURL: "C:\dev\indikatoren\data\Energiefluss.tsv",
                    itemDelimiter: "\t" 
                }
            }
        ]
    }
    else if(selVal == "B")
    {
        options.series = [{name: '2016', data: [3,2,1,2,3]}]
    }
    else if(selVal == "C")
    {
        options.series = [{name: 'C', data: [5,4,8,7,6]}]
    } 
    else
    {
        options.series = [{name: 'D', data: [4,7,9,6,2]}]
    }  
    var chart = new Highcharts.Chart(options);    
});*/




        Highcharts.chart('container', {
            title: {
                text: 'Energieflussdiagramm 2018'
            },
            accessibility: {
                point: {
                    valueDescriptionFormat: '{index}. {point.from} to {point.to}, {point.weight}.'
                }
            },
            series: [{
                keys: ['from', 'to', 'weight'],
                data:
                {
                    csvURL: "/data/Energiefluss.tsv",
                    itemDelimiter: "\t" 
                },
                nodes: [{
                    id: 'Wasserkraft',
                    column: 0,
                    color: '#008AC3'
                },
                {
                    id: 'Umwandler Thermisch',
                    column: 1,
                    offset: -120,
                    color: '#B00000'
                },
                {
                    id: 'Fernwärmenetz',
                    column: 2,
                    offset: -65,
                    color: '#B00000'
                },
                {
                    id: 'Umweltwärme',
                    column: 0,
                    color: '#B00000'
                },
                {
                    id: 'Sonne',
                    column: 0,
                    color: '#FF8028'
                },
                {
                    id: 'Stromnetz',
                    column: 2,
                    offset: 60,
                    color: '#008AC3'
                },
                {
                    id: 'Holz',
                    column: 0,
                    color: '#007A2F'
                },
                {
                    id: 'Abfall',
                    column: 0,
                    color: '#45381D'
                },
                {
                    id: 'Erdgas',
                    column: 0,
                    color: '#FABD24'
                },
                {
                    id: 'Heizöl',
                    column: 0,
                    color: '#923F8D'
                },
                {
                    id: 'Diesel',
                    column: 0,
                    color: '#474747'
                },
                {
                    id: 'Benzin',
                    column: 0,
                    color: '#246370'
                },
                {
                    id: 'Elektrizität',
                    column: 0,
                    color: '#008AC3'
                },
                {
                    id: 'Gasnetz',
                    column: 1,
                    offset: -40,
                    color: '#FABD24'
                },
                {
                    id: 'Umwandler Wasser/Photovoltaik',
                    column: 1,
                    offset: -200,
                    color: '#008AC3'
                },
                {
                    id: 'Fernwärme (Import)',
                    column: 0,
                    color: '#B00000'
                },
                {
                    id: 'Verluste',
                    column: 3,
                    offset: -430,
                    color: '#6F6F6F'
                },
                {
                    id: 'Nichtwohnen',
                    column: 3,
                    offset: 50,
                    color: '#6F6F6F'
                },
                {
                    id: 'Wohnen',
                    column: 3,
                    offset: 80,
                    color: '#6F6F6F'
                },
                {
                    id: 'Verkehr',
                    column: 3,
                    offset: 50,
                    color: '#6F6F6F'
                },
                {
                    id: 'Exporte',
                    column: 3,
                    offset: -430,
                    color: '#6F6F6F'
                }
                ],
                type: 'sankey',
                name: 'Energieflüsse 2018',
                curveFactor: 0.33,
                tooltip: {
                    pointFormat: '{point.fromNode.name} → {point.toNode.name}: <b>{point.weight:.1f} GWh</b><br/>',
                    nodeFormat: '{point.name}: <b>{point.sum:.1f} GWh</b><br/>'
                }
            }],
            plotOptions: {
                series: {
                    dataLabels: {
                        allowOverlap: true
                    }
                }

            },

        });

//]]></script>

</body>

</html>